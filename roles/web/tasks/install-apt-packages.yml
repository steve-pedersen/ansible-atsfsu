---
# Uses core module 'apt' to run apt related plays.

- name: apt-get update and upgrade
  apt:  
    update_cache: yes       # apt-get update
    cache_valid_time: 3600  # only update if last one is > 3600 seconds
    upgrade:  yes           # aptitude safe-upgrade

- name: install apache and php etc
  apt:  name={{ item }} state=present
  with_items:
    - apache2
    - libapache2-mod-php5
    - apache2-prefork-dev
    - php5-curl
    - php5-mcrypt
    - php-pear
    - php5-dev
    - libcurl4-openssl-dev
    - mailutils
    - cronolog
    - git-core
    - unzip
    - zip
    - munin-node
    - libpcre3-dev
    - php5-xmlrpc
    - php5-xsl
    - exim4
    - exim4-config
    - php5-intl
    - make
    - php5-pgsql
    - postgresql
    - shibboleth-sp2-schemas
    - libshibsp-dev
    - libshibsp-doc
    - libapache2-mod-shib2
    - opensaml2-tools
    - apt-get install clamav    # for antivirus users
